#### 升级版中间人攻击

假设银行server与客户端使用非对称加密。

那么正常的数据传递逻辑是这样：

> 1. 客户端向server请求公钥
> 2. server返回公钥给客户端
> 3. 客户端使用公钥对请求"给张三转100万"加密，然后发送给服务端

如果中间人在一开始就监听了服务端，那么容易发生这样的事情：

> 1. 客户端向server请求公钥
> 2. 中间人监听到了客户端要请求公钥
> 3. 服务端发送公钥给客户端
> 4. 中间人拦截到了公钥，并存了起来
> 5. 中间人伪造了一对假的密钥对，将假的公钥返回给客户端
> 6. 客户端使用假公钥对请求"给张三转100万"加密，然后发送给服务端
> 7. 中间人拦截到请求，使用假密钥对的私钥解密。
> 8. 中间人获得内容后将请求修改成"给我转100万"，再用真的公钥进行加密，然后发送给服务端
> 9. 服务端给中间人转了100万

#### 数字证书

数字证书就是为了解决上述问题而出现的。

> 数字证书 = 公钥 + 签名

客户端向服务端请求的时候，不再请求公钥，而是请求一个证书。

证书中有签名，是不能篡改的。如果篡改了证书，客户端是可以校验出来的。

这样就能保证公钥传输的安全。